
da\_style.cr
============
Instead of SASS or LESS, I am going to use
my personal alternative
that is implemented in Crystal.

You probably won't be able to use it.
But, maybe it will inspire you to create
something better than SASS/LESS.

The idea is to let uses use a subset + SASS-like
features to upload their own CSS files
while preventing CSS security vulnerabilities.


Security links:
===============
* http://www.diaryofaninja.com/blog/2013/10/30/executing-javascript-inside-css-another-reason-to-whitelist-and-encode-user-input
* https://www.curesec.com/blog/article/blog/Reading-Data-via-CSS-Injection-180.html


Previous version of this shard:
==============================
Originally, I was going to use Crystal code +
macros to generate CSS> BUt, that is not
practical because of the compile times:

```crystal
    s_alias("div") { |x|
      s(x) { background_color BLUE }
      s("#{x} span") { padding px(10) }
    }

    s("body") {
      background {
        color GREY
      }
    }

    s("#number") { col }
    s("#words") { col; background_color PINK }
    s("#quotation") { col; background_color GREEN }
```

So instead, I write CSS code with special additions,
then use the binary generated by this shard to
parse and sanitize it.


Example:
=======

File `input.css`:

```css
  /* Setup vars: */
  GREY  = rgb(1, 1, 1);
  WHITE = #FFF;
  BLACK = #000;
  LIGHT_BLACK = {{BLACK}}0011;

  div { background-color: {{WHITE}}; }
  .empty {
    background { color: {{BLACK}}; }
    font { size: 1em; }
    font-size: 2em;
  }

  @media (max-width: 12450px, min-width: 1000px) {
    body {
      padding: 20px 0 0 10em;
      background-color: {{BLACK}};
      background {
        color: {{GREY}};
        repeat: no-repeat;
      }
      background-color: {{LIGHT_BLACK}};
    }
  }

  /* Insert CSS code from other files here: */
  include("./file.css");
```

Output:

```css
  div {
    background-color: #FFF;
  }
  .empty {
    background-color: #000;
      font-size: 1em;
        font-size: 2em;
  }
  @media (max-width: 12450px, min-width: 1000px) {
      body {
        padding: 20px 0 0 10em;
        background-color: #000;
        background-color: rgb(1, 1, 1);
        background-repeat: no-repeat;
        background-color: #0000011;
      }
  }
  .include {
    color: #0000011;
  }
```
